{"EntityFrameworkEvent":{"Database":"RemoteApp","ConnectionId":"95e104b5-ee5e-4aaa-bdc9-f4bed4c5faa9","ContextId":"3a00c6cd-4fd1-4524-84d1-a838cd9b6aa2:10","Entries":[{"Table":"User","Name":"User","PrimaryKey":{"UserId":4},"Action":"Update","Changes":[{"ColumnName":"RoleId","OriginalValue":1,"NewValue":0},{"ColumnName":"UserPrenom","OriginalValue":"nawel","NewValue":"nawelghwghxghwgh"}],"ColumnValues":{"UserId":4,"RoleId":0,"UserEmail":"in_moulfi@esi.dz","UserLogin":"user","UserMaxCapacity":50,"UserNom":"moulfi","UserPassword":"2491401961831531265524336233242194991412161411812104133","UserPhone":"0774403051","UserPrenom":"nawelghwghxghwgh","UserStatus":0},"Valid":true}],"Result":0,"Success":false,"ErrorMessage":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---\u003E Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint \u0022FK_User_Role_RoleId\u0022. The conflict occurred in database \u0022RemoteApp\u0022, table \u0022dbo.Role\u0022, column \u0027RoleId\u0027.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action\u00601 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action\u00601 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean\u0026 dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean\u0026 moreRows)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean\u0026 more)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext\u00601 context)\r\n--- End of stack trace from previous location ---\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)\r\nClientConnectionId:95e104b5-ee5e-4aaa-bdc9-f4bed4c5faa9\r\nError Number:547,State:0,Class:16\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable\u00601 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable\u00601 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable\u00601 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList\u00601 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func\u00604 operation, Func\u00604 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Audit.EntityFramework.DbContextHelper.SaveChangesGetAuditAsyncImpl(IAuditDbContext context, Func\u00601 baseSaveChanges, CancellationToken cancellationToken)"},"EventType":"RemoteApp_ApplicationDbContext","Environment":{"UserName":"bmlab","MachineName":"LAPTOP-7TCRG49T","DomainName":"LAPTOP-7TCRG49T","CallingMethodName":"Audit.EntityFramework.DbContextHelper\u002B\u003CCreateAuditScopeAsync\u003Ed__31.MoveNext()","AssemblyName":"Audit.EntityFramework.Core, Version=21.1.0.0, Culture=neutral, PublicKeyToken=571d6b80b242c87e","Exception":"COMException: 0xE0434352","Culture":"fr-FR"},"StartDate":"2023-11-08T10:59:24.7931179Z","EndDate":"2023-11-08T10:59:24.8099655Z","Duration":17}